---
title: "Semana 13 y 14: Análisis del sensor LiDAR en CARLA"
excerpt_separator: "<!--more-->"
categories:
  - Blog
tags:
  - CARLA
  - Unreal
  - PythonAPI
  - LiDAR
  - Datasets
---

Durante las últimas semanas, se ha estado evaluando el sensor LiDAR en CARLA con el objetivo de analizar su fiabilidad y funcionamiento en diferentes escenarios.

## Mallas de colisión
Para comenzar, se creó un mapa plano con una pared, permitiendo observar cómo el sensor LiDAR detecta las mallas de colisión de diversos objetos presentes en entornos naturales, como rocas, árboles y arbustos.

Los resultados han demostrado que el sensor LiDAR captura de manera bastante precisa la forma de los distintos objetos, lo que indica un buen nivel de fiabilidad en la detección de obstáculos.

### Ejemplo SMF_TreePine_2
#### Imagen RGB
<figure class="align-center" style="max-width: 100%">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/Semana-12-RGB.png" alt="Imagen RGB">
</figure>

#### Segmentación Semántica
<figure class="align-center" style="max-width: 100%">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/Semana-12-Segmentacion.png" alt="Segmentacion Semantica">
</figure>

#### Sensor LiDAR
<figure class="align-center" style="max-width: 100%">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/Semana-12-LiDAR.png" alt="Sensor LiDAR">
</figure>

## Caracterización del sensor LiDar
Usando el mismo mapa se han estado analizando los ditintos parámetros modificables del sensor LiDAR:

### Channels
Se trata del número de lasers del sensor, es decir, los haces verticales del sensor, contra más alto sea su número,
mayor densidad vertical se obtiene. Con un número bajo, como por ejemplo 5 no se puede determinar la forma de los objetos 
al rededor. Se ha observado que un número mínimo para poder analizar el entorno sería de 32 canales, con los que ya se pueden 
distinguir los objetos del entorno. También hay que tener en cuenta el fov vertical, ya que los canales se exparcen por todo el 
campo de visión vertical, es decir que contra mayor sea el campo de visión, los canales se distancian más entre si, por lo que será
necesario un mayor número de canales para poder observar la forma de los objetos.


### Range
Se trata del rango máximo del sensor en metros, contra mayor sea el número, se podra detectar objetos más lejanos, aunque puede perder 
precisión.

### Points_per_second
Es el número de puntos que el sensor gnera por segundo, contra mayor sea el número, mayor densidad de puntos habrá.
Se ha determinado que el menor número de puntos que proporcionan un análisis fiable es de 500.000 puntos, y que a patir de los
5.000.000 no se distingan apreciables en la fiabilidad. Hay que tener en cuenta el número de canales y el rango, ya que el número de puntos
se reparte entre todos lo canales, por lo que si hay un número de canales muy elevado, será necesario aumentar el número de puntos para distinguir 
los objetos, y en cuanto al rango, será necesario un mayor número de puntos para distinguir los objetos lejanos, en caso de haber un rango amplio.

### Rotation_frecuency
Es la frecuencia de rotación del sensor, medido en Hz, lo mejor es usar un valor basado en el delta, es decir la frecuencia dinámica, para poder observarlo bien en cualquier ordenador, ya que si la frecuencia es muy baja solo se observará un ángulo reducido del sersor que va variando constantemente, lo que resulta molesto, ya que no se detectan todos los objetos a la vez.

### Upper_fov y lower_fov
Se trata del vampo de visión vertical, medido en grados, del sensor, contra mayor sea se podrá observar objetos más elevador o en una altura inferior. Pero, 
hay que tener en cuénta el número de canales ya que se reparten por todo el fov.

### Noise_stddev
Es el nivel de ruido gaussiano (desviación estándar), en este caso medido en metros ya que afecta a la posición de los puntos en el espacio medido en 3D.
Se ha determinado que con un ruido de 0.25 todavia se pueden observar objetos cercanos, pero se dificultan los lejanos y contra más va aumentando más dificil se vuelve poder identificar los objetos.

